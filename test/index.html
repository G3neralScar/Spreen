<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<style>
			#video-grid {
				width: 80%;
				height: 80%;
			}
		</style>
	</head>
	<body>
		<div id="video-grid"></div>
		<button onclick="shareScreen()">Screen Share</button>
		<button onclick="stop()">Stop Screen Share</button>
	</body>

	<script>
		const videoGrid = document.getElementById('video-grid');
		const video = document.createElement('video');
		video.muted = true;

		// navigator.mediaDevices
		// 	.getUserMedia({
		// 		video: true,
		// 		audio: true,
		// 	})
		// 	.then((stream) => {
		// 		video.srcObject = stream;
		// 		video.addEventListener('loadedmetadata', () => {
		// 			video.play();
		// 		});
		// 		videoGrid.append(video);
		// 	});

		function stop() {
			video.srcObject = null;
			videoGrid.innerHTML = null;
		}

		function shareScreen() {
			navigator.mediaDevices.getDisplayMedia({ cursor: true }).then((stream) => {
				video.srcObject = stream;
				video.addEventListener('loadedmetadata', () => {
					video.play();
				});
				videoGrid.append(video);

				stream.getVideoTracks()[0].onended = function () {
					stop();
				};
			});
		}
	</script>
</html>
